---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const timelineEvents = [
  {
    year: "2020-2022",
    titleKey: "timeline.events.work1.title",
    descriptionKey: "timeline.events.work1.description",
    type: "work",
    icon: "ðŸª"
  },
  {
    year: "2021",
    titleKey: "timeline.events.education1.title",
    descriptionKey: "timeline.events.education1.description",
    type: "education",
    icon: "ðŸ“š"
  },
  {
    year: "Sept 2022",
    titleKey: "timeline.events.education2.title",
    descriptionKey: "timeline.events.education2.description",
    type: "education",
    icon: "ðŸŽ“"
  },
  {
    year: "End 2023",
    titleKey: "timeline.events.business1.title",
    descriptionKey: "timeline.events.business1.description",
    type: "business",
    icon: "ðŸ’¼"
  },
  {
    year: "2024-2025",
    titleKey: "timeline.events.sports1.title",
    descriptionKey: "timeline.events.sports1.description",
    type: "sports",
    icon: "ðŸ€"
  },
  {
    year: "July 2025",
    titleKey: "timeline.events.education3.title",
    descriptionKey: "timeline.events.education3.description",
    type: "education",
    icon: "ðŸŽ‰"
  },
  {
    year: "Sept 2025",
    titleKey: "timeline.events.education4.title",
    descriptionKey: "timeline.events.education4.description",
    type: "education",
    icon: "âš¡"
  }
];

const getTypeColor = (type: string) => {
  switch (type) {
    case 'work':
      return 'bg-blue-500';
    case 'education':
      return 'bg-green-500';
    case 'business':
      return 'bg-purple-500';
    case 'sports':
      return 'bg-orange-500';
    default:
      return 'bg-gray-500';
  }
};
---

<div class="relative max-w-6xl mx-auto">
  <div class="absolute left-1/2 transform -translate-x-1/2 w-1 bg-gradient-to-b from-blue-200 to-blue-600 h-full rounded-full"></div>
  
  {timelineEvents.map((event, index) => (
    <div class={`flex items-center mb-16 ${index % 2 === 0 ? 'flex-row' : 'flex-row-reverse'}`} data-aos="fade-up" data-aos-delay={index * 100}>
      <div class={`w-5/12 ${index % 2 === 0 ? 'text-right pr-8' : 'text-left pl-8'}`}>
        <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-300 transform hover:scale-105">
          <div class="flex items-center mb-4">
            <span class="text-3xl mr-3">{event.icon}</span>
            <div>
              <div class="text-sm font-semibold text-blue-600 uppercase tracking-wide">{event.year}</div>
              <h3 class="text-xl font-bold text-gray-800 mt-1">{t(event.titleKey)}</h3>
            </div>
          </div>
          <p class="text-gray-600 leading-relaxed">{t(event.descriptionKey)}</p>
          <div class={`inline-block px-3 py-1 rounded-full text-white text-sm font-medium mt-4 ${getTypeColor(event.type)}`}>
            {event.type.charAt(0).toUpperCase() + event.type.slice(1)}
          </div>
        </div>
      </div>
      
      <div class="w-2/12 flex justify-center">
        <div class={`w-6 h-6 rounded-full ${getTypeColor(event.type)} border-4 border-white shadow-lg relative z-10`}></div>
      </div>
      
      <div class="w-5/12"></div>
    </div>
  ))}
</div>